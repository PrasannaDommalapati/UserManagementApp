@page "/users"

@inherits UsersBase
@inject IJSRuntime CurrentJSRuntime

<div>
    <button class="@ShowAddUser btn btn-primary float-right mb-2"
            @onclick="AddUser">
        <span class="fas fa-lg fa-user-plus"></span>
        Add User
    </button>
</div>
<div class="@ShowAddUserForm">
    <EditForm Model="@UserModel" OnValidSubmit="HandleValidSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />
        <div class="form-group">
            <label for="email">Email</label>
            <InputText class="form-control" id="email" @bind-Value="UserModel.Email" />
        </div>
        <div class="form-group">
            <label for="first-name">First Name</label>
            <InputText class="form-control" id="first-name" @bind-Value="UserModel.FirstName" />
        </div>

        <div class="form-group">
            <label for="last-name">Laast Name</label>
            <InputText class="form-control" id="last-name" @bind-Value="UserModel.LastName" />
        </div>

        <div class="form-group">
            <label for="birthday">Birthday</label>
            <InputDate class="form-control" id="birthday" @bind-Value="UserModel.Birthday" />
        </div>


        <button class="btn btn-primary float-right mb-2" type="submit">
            Submit
        </button>

    </EditForm>
</div>

<table class="table">
    <thead>
        <tr>
            <th>Id</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Birthday</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var user in UserList)
        {
            <tr>
                <td>@user.Id</td>
                <td>@user.FirstName</td>
                <td>@user.LastName</td>
                <td>@user.Email</td>
                <td>@user.Birthday</td>
                <td>
                    <button class="btn btn-primary"
                            @onclick="(() => DeleteUser(user.Id))">
                        <span class="fas fa-trash-alt"></span>
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>